# å‡¯å“¥äººå·¥æ™ºèƒ½æ¡Œé¢åº”ç”¨ - æ„å»ºå’Œåˆ†å‘æŒ‡å—

## ğŸ“¦ æ„å»ºäº§ç‰©è¯´æ˜

åˆšåˆšæˆåŠŸç”Ÿæˆäº†ä»¥ä¸‹æ–‡ä»¶ï¼š

### DMGå®‰è£…åŒ…
- **`å‡¯å“¥äººå·¥æ™ºèƒ½-1.0.0-arm64.dmg`** (87MB) - Apple Silicon (M1/M2) ç‰ˆæœ¬
- **`å‡¯å“¥äººå·¥æ™ºèƒ½-1.0.0.dmg`** (91MB) - Intel x64 ç‰ˆæœ¬

### åº”ç”¨ç›®å½•
- **`mac-arm64/`** - ARM64æ¶æ„çš„åº”ç”¨æ–‡ä»¶
- **`mac/`** - x64æ¶æ„çš„åº”ç”¨æ–‡ä»¶

## ğŸš€ å¿«é€Ÿæ„å»º

### 1. æ„å»ºå‘½ä»¤

```bash
# å®Œæ•´æ„å»ºï¼ˆåŒ…å«ä»£ç ç­¾åï¼Œéœ€è¦å¼€å‘è€…è¯ä¹¦ï¼‰
npm run build

# æœªç­¾åæ„å»ºï¼ˆæ¨èç”¨äºä¸ªäººåˆ†å‘ï¼‰
npm run build:unsigned

# ä»…æ‰“åŒ…ä¸åˆ†å‘
npm run pack
```

### 2. æ„å»ºæµç¨‹

```bash
# ç¬¬ä¸€æ­¥ï¼šæ„å»ºReactåº”ç”¨
npm run build:react

# ç¬¬äºŒæ­¥ï¼šæ‰“åŒ…Electronåº”ç”¨
electron-builder --publish=never --config.mac.identity=null
```

## ğŸ“‹ åˆ†å‘æŒ‡å—

### ğŸ macOSåˆ†å‘

#### **ä¸ªäººåˆ†å‘ï¼ˆæœªç­¾åï¼‰**
- âœ… ä½¿ç”¨ç”Ÿæˆçš„ `.dmg` æ–‡ä»¶
- âš ï¸ ç”¨æˆ·é¦–æ¬¡æ‰“å¼€éœ€è¦ï¼š
  1. å³é”®ç‚¹å‡»åº”ç”¨ â†’ "æ‰“å¼€"
  2. æˆ–åœ¨"ç³»ç»Ÿåå¥½è®¾ç½®" â†’ "å®‰å…¨æ€§ä¸éšç§"ä¸­å…è®¸

#### **æ­£å¼åˆ†å‘ï¼ˆéœ€è¦å¼€å‘è€…è´¦å·ï¼‰**
1. ç”³è¯·Apple Developerè´¦å· ($99/å¹´)
2. é…ç½®ä»£ç ç­¾åè¯ä¹¦
3. å¯ç”¨å…¬è¯ (Notarization)
4. ä¿®æ”¹æ„å»ºé…ç½®ï¼š

```json
{
  "mac": {
    "identity": "Developer ID Application: Your Name",
    "hardenedRuntime": true,
    "entitlements": "assets/entitlements.mac.plist",
    "notarize": {
      "teamId": "YOUR_TEAM_ID"
    }
  }
}
```

### ğŸ’» Windowsåˆ†å‘

```bash
# æ„å»ºWindowsç‰ˆæœ¬ï¼ˆéœ€è¦åœ¨Windowsç¯å¢ƒæˆ–é…ç½®äº¤å‰ç¼–è¯‘ï¼‰
npm run build -- --win
```

ç”Ÿæˆæ–‡ä»¶ï¼š
- `.exe` å®‰è£…ç¨‹åº
- `.msi` Windows InstalleråŒ…

### ğŸ§ Linuxåˆ†å‘

```bash
# æ„å»ºLinuxç‰ˆæœ¬
npm run build -- --linux
```

ç”Ÿæˆæ–‡ä»¶ï¼š
- `.AppImage` - ä¾¿æºå¼åº”ç”¨
- `.deb` - Debian/UbuntuåŒ…
- `.rpm` - RedHat/CentOSåŒ…

## ğŸ”§ é«˜çº§é…ç½®

### è‡ªå®šä¹‰å›¾æ ‡

1. å‡†å¤‡å›¾æ ‡æ–‡ä»¶ï¼š
```
assets/
â”œâ”€â”€ icon.icns    # macOS (1024x1024)
â”œâ”€â”€ icon.ico     # Windows (256x256)
â””â”€â”€ icon.png     # Linux (512x512)
```

2. æ›´æ–°é…ç½®ï¼š
```json
{
  "mac": {
    "icon": "assets/icon.icns"
  },
  "win": {
    "icon": "assets/icon.ico"
  },
  "linux": {
    "icon": "assets/icon.png"
  }
}
```

### è‡ªå®šä¹‰DMGæ ·å¼

1. åˆ›å»ºèƒŒæ™¯å›¾ï¼š
```
assets/dmg-background.png (540x380)
```

2. é…ç½®DMGå¤–è§‚ï¼š
```json
{
  "dmg": {
    "title": "å‡¯å“¥äººå·¥æ™ºèƒ½å®‰è£…ç¨‹åº",
    "background": "assets/dmg-background.png",
    "window": {
      "width": 540,
      "height": 380
    }
  }
}
```

## ğŸ“Š æ–‡ä»¶å¤§å°ä¼˜åŒ–

å½“å‰æ„å»ºå¤§å°çº¦87-91MBï¼Œä¸»è¦ç»„æˆï¼š
- Electronè¿è¡Œæ—¶: ~70MB
- Reactåº”ç”¨: ~1MB
- Nodeæ¨¡å—: ~15MB

### ä¼˜åŒ–å»ºè®®

1. **ä»£ç åˆ†å‰²**ï¼š
```javascript
// ä½¿ç”¨åŠ¨æ€å¯¼å…¥
const Component = lazy(() => import('./Component'));
```

2. **ç§»é™¤å¼€å‘ä¾èµ–**ï¼š
```json
{
  "files": [
    "!node_modules/**/*",
    "!**/*.map",
    "!**/*.md"
  ]
}
```

3. **å‹ç¼©èµ„æº**ï¼š
- ä¼˜åŒ–å›¾ç‰‡èµ„æº
- å¯ç”¨Gzipå‹ç¼©

## ğŸ”’ å®‰å…¨è€ƒè™‘

### ä»£ç ç­¾åçš„é‡è¦æ€§

| åˆ†å‘æ–¹å¼ | ä»£ç ç­¾å | ç”¨æˆ·ä½“éªŒ | å®‰å…¨æ€§ |
|---------|---------|---------|--------|
| **æœªç­¾å** | âŒ | âš ï¸ éœ€è¦æ‰‹åŠ¨å…è®¸ | âš ï¸ è¾ƒä½ |
| **å¼€å‘è€…ç­¾å** | âœ… | âœ… ç›´æ¥è¿è¡Œ | âœ… é«˜ |
| **å…¬è¯+ç­¾å** | âœ…âœ… | âœ… æœ€ä½³ä½“éªŒ | âœ…âœ… æœ€é«˜ |

### å»ºè®®æµç¨‹

1. **å¼€å‘é˜¶æ®µ**: ä½¿ç”¨æœªç­¾åç‰ˆæœ¬
2. **å†…æµ‹é˜¶æ®µ**: å¼€å‘è€…ç­¾å
3. **æ­£å¼å‘å¸ƒ**: å®Œæ•´ç­¾å+å…¬è¯

## ğŸ¯ å¸¸è§é—®é¢˜

### Q: ç”¨æˆ·æŠ¥å‘Š"åº”ç”¨å·²æŸå"
**A**: è¿™æ˜¯å› ä¸ºåº”ç”¨æœªç­¾åï¼Œç”¨æˆ·éœ€è¦ï¼š
```bash
# æ¸…é™¤éš”ç¦»å±æ€§
sudo xattr -r -d com.apple.quarantine /Applications/å‡¯å“¥äººå·¥æ™ºèƒ½.app
```

### Q: æ„å»ºå¤±è´¥ "Command failed: codesign"
**A**: ä½¿ç”¨æœªç­¾åæ„å»ºï¼š
```bash
npm run build:unsigned
```

### Q: DMGæ–‡ä»¶å¤ªå¤§
**A**: 
1. æ£€æŸ¥æ˜¯å¦åŒ…å«äº†ä¸å¿…è¦çš„æ–‡ä»¶
2. ä¼˜åŒ–ä¾èµ–é¡¹
3. ä½¿ç”¨ä»£ç åˆ†å‰²

## ğŸ“ˆ è‡ªåŠ¨åŒ–éƒ¨ç½²

### GitHub Actionsç¤ºä¾‹

```yaml
name: Build and Release
on:
  push:
    tags: ['v*']

jobs:
  build:
    runs-on: macos-latest
    steps:
      - uses: actions/checkout@v3
      - uses: actions/setup-node@v3
      - run: npm install
      - run: npm run build:unsigned
      - uses: actions/upload-artifact@v3
        with:
          name: dmg-files
          path: desktop/dist/*.dmg
```

---

## ğŸ‰ æ€»ç»“

ç°åœ¨ä½ æœ‰äº†å®Œæ•´çš„DMGå®‰è£…åŒ…ï¼

**ç«‹å³å¯ç”¨çš„æ–‡ä»¶ï¼š**
- `å‡¯å“¥äººå·¥æ™ºèƒ½-1.0.0-arm64.dmg` - M1/M2 Macç”¨æˆ·
- `å‡¯å“¥äººå·¥æ™ºèƒ½-1.0.0.dmg` - Intel Macç”¨æˆ·

**åˆ†å‘æ­¥éª¤ï¼š**
1. å°†DMGæ–‡ä»¶åˆ†äº«ç»™ç”¨æˆ·
2. ç”¨æˆ·ä¸‹è½½å¹¶åŒå‡»å®‰è£…
3. é¦–æ¬¡è¿è¡Œæ—¶å³é”®"æ‰“å¼€"å³å¯

**ä¸‹ä¸€æ­¥ä¼˜åŒ–ï¼š**
1. æ·»åŠ è‡ªå®šä¹‰å›¾æ ‡
2. ç”³è¯·å¼€å‘è€…è¯ä¹¦
3. é…ç½®è‡ªåŠ¨æ›´æ–°æœºåˆ¶ 